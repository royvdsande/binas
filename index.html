<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Binas Digitaal</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

    :root {
      color-scheme: light;
      --accent: #2563eb;
      --accent-strong: #1d4ed8;
      --bg: #eef2f7;
      --panel: #ffffff;
      --border: #d6dbe6;
      --text: #0f172a;
      --muted: #4b5563;
    }

    * {
      box-sizing: border-box;
    }

    .no-select {
      user-select: none;
    }

    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    .layout {
      display: grid;
      grid-template-columns: 320px 1fr;
      min-height: 100vh;
      height: 100vh;
      background: #ffffff;
    }

    .brand {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 10px 6px 10px;
      color: #0f172a;
    }

    .brand svg {
      width: 30px;
      height: 30px;
      color: var(--accent);
      flex-shrink: 0;
    }

    .brand .text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .brand-title {
      margin: 0;
      font-size: 16px;
      font-weight: 800;
      letter-spacing: -0.01em;
    }

    .brand-subtitle {
      margin: 0;
      font-size: 12px;
      color: var(--muted);
      font-weight: 600;
      white-space: nowrap;
    }

    .file-picker {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      border: 1px dashed var(--border);
      border-radius: 6px;
      background: #f8fafc;
      width: 100%;
    }

    .file-picker label {
      font-weight: 700;
      color: #0f172a;
      font-size: 14px;
      white-space: nowrap;
    }

    .file-picker input[type='file'] {
      width: 100%;
      font-size: 14px;
    }

    main {
      display: contents;
    }

    .content {
      display: contents;
    }

    .sidebar {
      border-right: 1px solid var(--border);
      background: #f8fafc;
      padding: 16px 14px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      height: 100vh;
      overflow: hidden;
    }

    .sidebar-top {
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: sticky;
      top: 0;
      background: #f8fafc;
      z-index: 2;
      padding-bottom: 4px;
    }

    .sidebar h2 {
      margin: 0;
      font-size: 15px;
      font-weight: 800;
      color: #0f172a;
    }

    .nav-header {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .nav-area {
      display: flex;
      flex-direction: column;
      gap: 10px;
      flex: 1;
      min-height: 0;
    }

    .nav-scroll {
      overflow: auto;
      padding-right: 2px;
      flex: 1;
      min-height: 0;
    }

    .search-box {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      background: #ffffff;
      border: 1px solid var(--border);
      border-radius: 6px;
    }

    .search-box svg {
      width: 18px;
      height: 18px;
    }

    .search-box input {
      border: none;
      outline: none;
      width: 100%;
      font-size: 14px;
      color: var(--text);
      background: transparent;
    }

    .nav-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .nav-group {
      border: 1px solid var(--border);
      border-radius: 6px;
      background: #ffffff;
      overflow: hidden;
      box-shadow: 0 6px 12px rgba(15, 23, 42, 0.06);
    }

    .nav-group-header {
      padding: 8px 10px;
      background: #f1f5f9;
      font-weight: 800;
      font-size: 13px;
      color: #1f2937;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav-group-header.theme-algemeen {
      background: #c94195;
      color: #ffffff;
      border-color: #c94195;
    }

    .nav-group-header.theme-natuurkunde {
      background: #0163ac;
      color: #ffffff;
      border-color: #0163ac;
    }

    .nav-group-header.theme-wiskunde {
      background: #a0341a;
      color: #ffffff;
      border-color: #a0341a;
    }

    .nav-group-header.theme-scheikunde {
      background: #ff3b2d;
      color: #ffffff;
      border-color: #ff3b2d;
    }

    .nav-group-header.theme-biologie {
      background: #2c9a44;
      color: #ffffff;
      border-color: #2c9a44;
    }

    .nav-group ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .nav-sublist {
      padding-left: 12px;
      border-left: 2px dashed #e5e7eb;
    }

    .nav-item {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 6px;
      align-items: center;
      width: 100%;
      padding: 8px 10px;
      border: none;
      background: transparent;
      text-align: left;
      cursor: pointer;
      transition: background 0.15s ease, color 0.15s ease;
      font-weight: 600;
      color: #111827;
    }

    .nav-item:hover {
      background: #eef3ff;
      color: #1d4ed8;
    }

    .nav-item .meta {
      font-size: 12px;
      color: var(--muted);
      font-weight: 700;
    }

    .toolbar {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      border-bottom: 1px solid var(--border);
      background: #ffffff;
      position: sticky;
      top: 0;
      z-index: 2;
      flex-wrap: wrap;
    }

    .toolbar-group {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    button {
      border: 1px solid var(--border);
      background: #ffffff;
      color: #111827;
      padding: 6px 8px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: background 0.15s ease, border-color 0.15s ease, transform 0.1s ease;
      min-width: 34px;
      min-height: 34px;
    }

    button svg {
      width: 18px;
      height: 18px;
    }

    .toolbar button span {
      display: none;
    }

    button:hover:not(:disabled) {
      background: #eef3ff;
      border-color: #c9d7ff;
      transform: translateY(-1px);
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .primary {
      background: #2563eb;
      color: #ffffff;
      border-color: #1d4ed8;
    }

    .primary:hover:not(:disabled) {
      background: #1d4ed8;
      border-color: #1e40af;
    }

    .toolbar-status {
      margin-left: auto;
      display: inline-flex;
      gap: 8px;
      align-items: center;
      font-weight: 700;
      color: var(--muted);
      flex-wrap: wrap;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #eef2ff;
      color: #1d4ed8;
      border-radius: 10px;
      padding: 6px 10px;
      border: 1px solid #dbe4ff;
      font-weight: 700;
    }

    .viewer {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      height: 100vh;
      background: #ffffff;
    }

    .viewer-area {
      flex: 1;
      background: #f7f9fb;
      padding: 0;
      overflow: auto;
      height: 100%;
    }

    .page-grid {
      display: grid;
      gap: 16px;
      justify-content: center;
      grid-template-columns: repeat(1, minmax(260px, 1fr));
      align-items: start;
      padding: 16px;
    }

    .page-grid.spread {
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    }

    .page-wrapper {
      background: transparent;
      border-radius: 0;
      border: none;
      box-shadow: none;
      padding: 0;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .page-label {
      position: absolute;
      top: 8px;
      left: 8px;
      background: rgba(15, 23, 42, 0.75);
      color: #ffffff;
      padding: 4px 8px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.02em;
    }

    canvas.page-canvas {
      width: auto;
      max-width: 100%;
      height: auto;
      display: block;
      background: #ffffff;
      border: 1px solid #e5e7eb;
    }

    .empty-state {
      text-align: center;
      padding: 50px 16px;
      color: var(--muted);
      display: grid;
      gap: 12px;
      justify-items: center;
    }

    .empty-state svg {
      width: 72px;
      height: 72px;
      color: var(--accent);
    }
  </style>
</head>
<body>
  <div class="layout">
    <aside class="sidebar" aria-label="Inhoud van Binas">
      <div class="sidebar-top">
        <div class="brand no-select" aria-label="PDF viewer">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M6 3h9l3 3v15H6z" />
            <path d="M15 3v3h3" />
            <path d="M9 12h3M9 16h6" />
            <path d="M9 8h2" />
          </svg>
          <div class="text">
            <p class="brand-title">Digitale Binas</p>
            <p class="brand-subtitle">Gemaakt door Roy van der Sande</p>
          </div>
        </div>
        <div class="file-picker">
          <label class="no-select" for="file-input">Bestand</label>
          <input id="file-input" type="file" accept="application/pdf" />
        </div>
        <div class="nav-header">
          <h2 class="no-select">INHOUD BiNaS</h2>
          <div class="search-box">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <circle cx="11" cy="11" r="7" />
              <line x1="16.5" y1="16.5" x2="21" y2="21" />
            </svg>
            <input id="nav-search" type="search" placeholder="Zoek op tabel of naam" />
          </div>
        </div>
      </div>
      <div class="nav-area">
        <div class="nav-scroll">
          <ul class="nav-list" id="nav-list" aria-live="polite"></ul>
        </div>
      </div>
    </aside>

    <div class="viewer">
      <div class="toolbar">
        <div class="toolbar-group" aria-label="Navigatie">
          <button id="prev-page" title="Vorige pagina">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M15 18l-6-6 6-6" />
            </svg>
            <span>Vorige</span>
          </button>
          <button id="next-page" title="Volgende pagina">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 6l6 6-6 6" />
            </svg>
            <span>Volgende</span>
          </button>
        </div>

        <div class="toolbar-group" aria-label="Zoom">
          <button id="zoom-out" title="Uitzoomen">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="7" />
              <line x1="8" y1="11" x2="14" y2="11" />
              <line x1="16.5" y1="16.5" x2="21" y2="21" />
            </svg>
            <span>Uitzoomen</span>
          </button>
          <button id="zoom-in" title="Inzoomen">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="7" />
              <line x1="11" y1="8" x2="11" y2="14" />
              <line x1="8" y1="11" x2="14" y2="11" />
              <line x1="16.5" y1="16.5" x2="21" y2="21" />
            </svg>
            <span>Inzoomen</span>
          </button>
          <button id="fit-height" title="Schaal tot hoogte">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="5" y="3" width="14" height="18" rx="2" />
              <polyline points="12 7 9 10 12 13" />
              <polyline points="12 17 15 14 12 11" />
            </svg>
            <span>Hoogte</span>
          </button>
          <button id="fit-width" title="Schaal tot breedte">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="6" width="18" height="12" rx="2" />
              <polyline points="7 12 10 9 10 15 7 12" />
              <polyline points="17 12 14 9 14 15 17 12" />
            </svg>
            <span>Breedte</span>
          </button>
          <button id="reset-zoom" title="Reset zoom">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="1 4 1 10 7 10" />
              <polyline points="23 20 23 14 17 14" />
              <path d="M20.49 9A9 9 0 0 0 6.15 4.36L1 10" />
              <path d="M3.51 15A9 9 0 0 0 17.85 19.64L23 14" />
            </svg>
            <span>Reset</span>
          </button>
        </div>

        <div class="toolbar-group" aria-label="Weergave">
          <button id="toggle-view" title="Schakel tussen 1 of 2 pagina's"></button>
        </div>

        <div class="toolbar-status no-select">
          <span id="page-status">Pagina – / –</span>
          <span aria-hidden="true">•</span>
          <span id="zoom-status" class="badge">Zoom: 100%</span>
        </div>
      </div>

      <div class="viewer-area">
        <div class="page-grid" id="page-grid">
          <div class="empty-state" id="empty-state">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
              <path d="M7 7h10v10H7z" />
              <path d="M7 13h6" />
            </svg>
            <div>
              <strong>Upload een PDF om te beginnen</strong>
            </div>
            <div>Volledig scherm, snelle navigatie en 2-pagina weergave.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const pdfjsLib = window['pdfjs-dist/build/pdf'];
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';

    const fileInput = document.getElementById('file-input');
    const pageGrid = document.getElementById('page-grid');
    const emptyState = document.getElementById('empty-state');
    const navList = document.getElementById('nav-list');
    const navSearch = document.getElementById('nav-search');

    const prevBtn = document.getElementById('prev-page');
    const nextBtn = document.getElementById('next-page');
    const zoomInBtn = document.getElementById('zoom-in');
    const zoomOutBtn = document.getElementById('zoom-out');
    const fitHeightBtn = document.getElementById('fit-height');
    const fitWidthBtn = document.getElementById('fit-width');
    const resetZoomBtn = document.getElementById('reset-zoom');
    const toggleViewBtn = document.getElementById('toggle-view');
    const pageStatus = document.getElementById('page-status');
    const zoomStatus = document.getElementById('zoom-status');
    const viewerArea = document.querySelector('.viewer-area');

    let pdfDoc = null;
    let currentPage = 1;
    let scale = 1;
    let isSpread = false;
    let fitMode = null;
    const minScale = 0.2;
    const maxScale = 4;
    const scaleStep = 0.15;

    const singlePageIcon = `
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="6" y="4" width="12" height="16" rx="2" />
      </svg>
    `;

    const spreadIcon = `
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="4" width="8" height="16" rx="2" />
        <rect x="13" y="4" width="8" height="16" rx="2" />
      </svg>
    `;

    const navigationData = [
      {
        section: 'Algemeen',
        theme: 'algemeen',
        items: [
          { title: '1 – Grieks alfabet', page: 5 },
          { title: '2 – Vermenigvuldigingsfactoren', page: 6 },
          { title: '3 – Basisgrootheden en grondeenheden in het SI', page: 7 },
          { title: '4 – Grootheden en eenheden in het SI', page: 9 },
          { title: '5 – Omrekencoefficiënten van eenheden', page: 12 },
          {
            title: '6 – Machten van tien',
            page: 14,
            children: [
              { title: 'A. Massa', page: 14 },
              { title: 'B. Tijd', page: 14 },
              { title: 'C. Temperatuur', page: 15 },
              { title: 'D. Energie', page: 15 },
            ],
          },
        ],
      },
      {
        section: 'Natuurkunde',
        theme: 'natuurkunde',
        items: [
          {
            title: '7 – Waarden van enige constanten',
            page: 18,
            children: [
              { title: 'A. Natuurconstanten', page: 18 },
              { title: 'B. Massa en energie', page: 19 },
              { title: 'C. Planck-eenheden', page: 20 },
            ],
          },
          { title: '8 – Gegevens van metalen', page: 23 },
          { title: '9 – Gegevens van vlamgassen', page: 25 },
          {
            title: '10 – Gegevens van vaste stoffen',
            page: 27,
            children: [
              { title: 'A. Fysische eigenschappen', page: 27 },
              { title: 'B. Materiaaleigenschappen', page: 29 },
            ],
          },
          { title: '11 – Gegevens van vloeistoffen', page: 31 },
          { title: '12 – Gegevens van gassen en dampen', page: 33 },
          {
            title: '13 – Verzadigingsdrukken',
            page: 35,
            children: [
              { title: 'A. Water', page: 35 },
              { title: 'B. CO₂, propaan, butaan, etheen, alcohol, water', page: 36 },
            ],
          },
          { title: '14 – Kook- en smeltpunten', page: 39 },
          {
            title: '15 – Geluid',
            page: 42,
            children: [
              { title: 'A. Voortplantingssnelheden', page: 42 },
              { title: 'B. Absorptiecoëfficiënten', page: 43 },
              { title: 'C. Muziek', page: 43 },
              { title: 'D. Akoestische schaal', page: 44 },
            ],
          },
          {
            title: '16 – Elektriciteit en magnetisme',
            page: 47,
            children: [
              { title: 'A. Relatieve diëlektrische constanten', page: 47 },
              { title: 'B. Soorten magneten', page: 48 },
              { title: 'C. Halogeen- & spaarlampen', page: 49 },
              { title: 'D. Thermo-elektriciteit', page: 50 },
              { title: 'E. Elektromagneten', page: 50 },
              { title: 'F. Kleuren', page: 51 },
              { title: 'G. Elektrotechnische symbolen', page: 52 },
              { title: 'H. Digitale schakelingen', page: 53 },
            ],
          },
          { title: '17 – Brekingsindices', page: 56 },
          {
            title: '18 – Elektromagnetisch spectrum',
            page: 59,
            children: [
              { title: 'A. Zichtbaar licht', page: 59 },
              { title: 'B. Algemeen overzicht', page: 60 },
            ],
          },
          { title: '19 – Spectraallijnen', page: 62 },
          {
            title: '20 – Atoomfysica',
            page: 64,
            children: [
              { title: 'A. Bolmodel', page: 64 },
              { title: 'B. Ionisatie-energieën', page: 65 },
              { title: 'C. Plasma', page: 66 },
              { title: 'D. Spectra', page: 67 },
            ],
          },
          { title: '21 – Planck-krommen', page: 70 },
        ],
      },
      {
        section: 'Natuurkunde vervolg',
        theme: 'natuurkunde',
        items: [
          { title: '23 – Quantummechanica', page: 74 },
          { title: '24 – Foto-elektrisch effect', page: 76 },
          {
            title: '25 – Isotopen',
            page: 78,
            children: [
              { title: 'A. Isotopenblad', page: 78 },
              { title: 'B. Isotopenkaart', page: 80 },
            ],
          },
          {
            title: '26 – Bouw & structuur van materie',
            page: 82,
            children: [
              { title: 'A. Elementaire deeltjes', page: 82 },
              { title: 'B. Wisselwerkingsdeeltjes', page: 83 },
              { title: 'C. Hadronen', page: 84 },
            ],
          },
          {
            title: '27 – Biofysica',
            page: 87,
            children: [
              { title: 'A. Zicht', page: 87 },
              { title: 'B. Huid & UV', page: 88 },
              { title: 'C. Geluid', page: 89 },
              { title: 'D. Radioactiviteit', page: 90 },
            ],
          },
          {
            title: '28 – Fysica & milieu',
            page: 92,
            children: [
              { title: 'A. Luchtverontreiniging', page: 92 },
              { title: 'B. Stofconcentraties', page: 93 },
              { title: 'C. Lichtabsorptie in water', page: 94 },
              { title: 'D. Radioactiviteit (bouwmaterialen)', page: 95 },
              { title: 'E. Zuiver geïoniseerde lucht', page: 96 },
              { title: 'F. Verontreinigingscoëfficiënten processen', page: 96 },
            ],
          },
          {
            title: '29 – Medische beeldvorming',
            page: 99,
            children: [
              { title: 'A. Röntgen', page: 99 },
              { title: 'B. Echografie', page: 100 },
              { title: 'C. MRI', page: 101 },
              { title: 'D. PET', page: 102 },
            ],
          },
          {
            title: '30 – Kosmische straling',
            page: 104,
            children: [{ title: 'A. Samenvatting', page: 104 }],
          },
          {
            title: '31 – Sterren',
            page: 107,
            children: [
              { title: 'A. Sterren & stelsels', page: 107 },
              { title: 'B. HR-diagram', page: 108 },
              { title: 'C. Kosmologie', page: 110 },
            ],
          },
          {
            title: '32 – Evolutie van sterren',
            page: 114,
            children: [
              { title: 'A. Stervorming', page: 114 },
              { title: 'B. Sterren', page: 115 },
              {
                title: 'C. Beëindiging',
                page: 116,
                children: [
                  { title: '1. De Melkweg', page: 118 },
                  { title: '2. Lokale groep', page: 119 },
                  { title: '3. Andere clusters', page: 120 },
                ],
              },
              { title: 'D. Kosmische achtergrondstraling', page: 122 },
              { title: 'E. Oerknal & evolutie heelal', page: 123 },
            ],
          },
        ],
      },
      {
        section: 'Wiskunde',
        theme: 'wiskunde',
        items: [
          {
            title: '36 – Wiskundeformules',
            page: 130,
            children: [
              { title: 'A. Verhoudingen', page: 130 },
              { title: 'B. Lengtes, oppervlakken, volumes', page: 131 },
              { title: 'C. Vertaaloefeningen', page: 132 },
              { title: 'D. Machten & logaritmen', page: 133 },
              { title: 'E. Cirkel, ellips, hyperbool, parabool', page: 135 },
              { title: 'F. Differentiëren & integreren', page: 137 },
              { title: 'G. Goniometrie', page: 140 },
              { title: 'H. Rijen & reeksen', page: 142 },
              { title: 'I. Notaties', page: 143 },
            ],
          },
        ],
      },
      {
        section: 'Scheikunde',
        theme: 'scheikunde',
        items: [
          {
            title: '37 – Scheikundeformules',
            page: 150,
            children: [
              { title: 'A. Reactiesnelheid', page: 150 },
              { title: 'B. Evenwicht', page: 151 },
              { title: 'C. Thermodynamica', page: 152 },
              { title: 'D. Elektrochemie', page: 154 },
              { title: 'E. Spectrometrie', page: 155 },
              { title: 'F. Chromatografie', page: 156 },
              { title: 'G. Basiswaarden', page: 157 },
              { title: 'H. Hoeveelheid stof', page: 158 },
              { title: 'I. Zuurmaat', page: 158 },
            ],
          },
          { title: '38 – Chemische symbolen', page: 160 },
          {
            title: '39 – Spectrometrie',
            page: 164,
            children: [
              { title: 'A. UV/Vis', page: 164 },
              { title: 'B. NMR', page: 165 },
              { title: 'C. IR', page: 166 },
              { title: 'D. MS', page: 167 },
            ],
          },
          {
            title: '40 – Elementen',
            page: 170,
            children: [
              { title: 'A. Gegevens', page: 170 },
              { title: 'B. Oplosbaarheid, kernmassa, voorkomen', page: 171 },
            ],
          },
          { title: '41 – Molair & molecuulgebonden', page: 174 },
          { title: '42 – Smelt- en kookpunten', page: 176 },
          { title: '43 – Oplosbaarheid van bindingen', page: 177 },
          { title: '44 – Dichterheden & molaire massa’s', page: 178 },
          { title: '45 – Dampdrukken', page: 180 },
          { title: '46 – Evenwichtsreacties in water', page: 182 },
          { title: '47 – Evenwicht van zuren/basen, complexen', page: 184 },
          { title: '48 – Sterk en zwak zuur', page: 186 },
          { title: '49 – Zuur-base diagrammen', page: 188 },
          {
            title: '50 – Ionisatieconstanten',
            page: 190,
            children: [{ title: 'A. Water', page: 190 }],
          },
          {
            title: '51 – Bindingseigenschappen',
            page: 192,
            children: [{ title: 'A. Bindingslengte', page: 192 }],
          },
          { title: '52 – Evenwichtsconstanten', page: 194 },
          {
            title: '53 – Indicatoren',
            page: 196,
            children: [{ title: 'A. Zuur-/base-indicatoren', page: 196 }],
          },
          {
            title: '54 – Reactiemechanismen',
            page: 198,
            children: [
              { title: 'A. SN2', page: 198 },
              { title: 'B. SN1', page: 199 },
              { title: 'C. Eliminatie SN1/SN2', page: 200 },
              { title: 'D. Eliminatiereacties', page: 201 },
              { title: 'E. E1', page: 202 },
              { title: 'F. E2', page: 203 },
            ],
          },
          { title: '55 – Verbindingen & bindingen', page: 206 },
          { title: '56 – Vormingstemperaturen', page: 210 },
          { title: '57 – Verbrandingswarmten', page: 213 },
          { title: '58 – Bindingslengten', page: 216 },
          { title: '59 – Ionisatie-energieën & affiniteiten', page: 218 },
          { title: '60 – Enthalpie', page: 219 },
          { title: '61 – Entropie', page: 221 },
          { title: '62 – Hydrolyse', page: 223 },
          { title: '63 – Gaswetten', page: 224 },
          { title: '64 – Oplosbaarheid', page: 226 },
          {
            title: '65 – Eigenschappen chemicaliën',
            page: 229,
            children: [
              { title: 'A. Vlamtemperaturen', page: 229 },
              { title: 'B. Kleuren', page: 230 },
            ],
          },
          {
            title: '66 – Naamgeving',
            page: 233,
            children: [
              { title: 'A. Triviale namen', page: 233 },
              { title: 'B. Enkelvoudige stoffen', page: 234 },
              { title: 'C. IUPAC-formules', page: 235 },
              { title: 'D. Regels systematische naamgeving', page: 236 },
              { title: 'E. Macromoleculaire materialen', page: 237 },
            ],
          },
        ],
      },
      {
        section: 'Biologie',
        theme: 'biologie',
        items: [
          {
            title: '67 – Structuurformules',
            page: 242,
            children: [
              { title: 'A. Koolhydraten', page: 242 },
              { title: 'B. Vetzuur/vetten', page: 244 },
              { title: 'C. Aminozuren/eiwitten', page: 246 },
              { title: 'D. Hormonen', page: 248 },
              { title: 'E. Hormonale stoffen', page: 249 },
              { title: 'F. Transmitters', page: 250 },
              { title: 'G. Enzymen', page: 251 },
            ],
          },
          {
            title: '68 – Dissimilatie',
            page: 254,
            children: [
              { title: 'A. Overzicht glucose', page: 254 },
              { title: 'B. Glycolyse', page: 255 },
              { title: 'C. Citroenzuurcyclus', page: 256 },
              { title: 'D. Oxidatieve fosforylering', page: 257 },
              { title: 'E. Dissimilatie macro’s', page: 258 },
            ],
          },
          { title: '69 – Fotosynthese', page: 260 },
          { title: '70 – Chromosomen mens', page: 263 },
          { title: '71 – DNA/RNA', page: 266 },
          { title: '72 – Absorptiespectra pigmenten', page: 275 },
          { title: '73 – Plantenanatomie', page: 277 },
          { title: '74 – Fysiologie plant', page: 279 },
          { title: '75 – Osmotische waarden', page: 281 },
          { title: '76 – Celdeling', page: 283 },
          { title: '77 – Virussen', page: 288 },
          { title: '78 – Het bloed', page: 291 },
          { title: '79 – Cellen', page: 294 },
          { title: '80 – Spijsvertering', page: 297 },
          { title: '81 – Plantafgeleide weefsels', page: 300 },
          { title: '82 – Transport mens & plant', page: 301 },
          { title: '83 – Afweer', page: 304 },
          { title: '84 – Bloed en bloedsomloop', page: 306 },
          { title: '85 – Voortplanting', page: 309 },
          { title: '86 – Ontwikkeling', page: 311 },
          { title: '87 – Zenuwstelsel', page: 313 },
          { title: '88 – Hormonenstelsel', page: 315 },
          { title: '89 – Beweging & conditie', page: 316 },
          { title: '90 – Skeletten', page: 316 },
          { title: '91 – Plantkunde', page: 317 },
          { title: '92 – Systematiek', page: 317 },
          { title: '93 – Ecologie', page: 317 },
          { title: '94 – Evolutie', page: 317 },
        ],
      },
      {
        section: 'Algemeen – Achterin',
        theme: 'algemeen',
        items: [
          { title: '96 – Veiligheid & milieu', page: 317 },
          { title: '97 – Nanotechnologie', page: 317 },
          { title: '98 – Molaire massa’s veel gebruikte stoffen', page: 317 },
          { title: '99 – Periodiek systeem der elementen', page: 317 },
        ],
      },
    ];

    function getGridMetrics() {
      const styles = getComputedStyle(pageGrid);
      const paddingX = parseFloat(styles.paddingLeft) + parseFloat(styles.paddingRight);
      const paddingY = parseFloat(styles.paddingTop) + parseFloat(styles.paddingBottom);
      const gap = parseFloat(styles.columnGap || styles.gap || '0');
      return { paddingX, paddingY, gap };
    }

    async function calculateFitWidthScale() {
      if (!pdfDoc || !viewerArea) return scale;
      const page = await pdfDoc.getPage(currentPage);
      const viewport = page.getViewport({ scale: 1 });
      const { paddingX, gap } = getGridMetrics();
      const columns = isSpread ? 2 : 1;
      const availableWidth = Math.max(120, viewerArea.clientWidth - paddingX - gap * (columns - 1));
      const targetWidth = availableWidth / columns;
      return clampZoom(targetWidth / viewport.width);
    }

    async function calculateFitHeightScale() {
      if (!pdfDoc || !viewerArea) return scale;
      const page = await pdfDoc.getPage(currentPage);
      const viewport = page.getViewport({ scale: 1 });
      const { paddingY } = getGridMetrics();
      const availableHeight = Math.max(120, viewerArea.clientHeight - paddingY);
      return clampZoom(availableHeight / viewport.height);
    }

    function updatePageStatus() {
      if (!pdfDoc) {
        pageStatus.textContent = 'Pagina – / –';
        return;
      }
      if (isSpread) {
        const secondPage = Math.min(currentPage + 1, pdfDoc.numPages);
        const range = secondPage !== currentPage ? `${currentPage}–${secondPage}` : `${currentPage}`;
        pageStatus.textContent = `Pagina ${range} / ${pdfDoc.numPages}`;
        return;
      }
      pageStatus.textContent = `Pagina ${currentPage} / ${pdfDoc.numPages}`;
    }

    function updateZoomStatus() {
      zoomStatus.textContent = `Zoom: ${(scale * 100).toFixed(0)}%`;
    }

    function updateToggleButtonVisual() {
      if (!toggleViewBtn) return;
      toggleViewBtn.classList.toggle('primary', isSpread);
      const label = isSpread ? "2 pagina's" : '1 pagina';
      toggleViewBtn.innerHTML = `${isSpread ? spreadIcon : singlePageIcon}<span>${label}</span>`;
    }

    function updateButtons() {
      const hasDoc = Boolean(pdfDoc);
      prevBtn.disabled = !hasDoc || currentPage <= 1;
      const maxForNext = isSpread && pdfDoc ? pdfDoc.numPages - 1 : pdfDoc?.numPages ?? 0;
      nextBtn.disabled = !hasDoc || currentPage >= maxForNext;
      zoomInBtn.disabled = !hasDoc || scale >= maxScale;
      zoomOutBtn.disabled = !hasDoc || scale <= minScale;
      fitHeightBtn.disabled = !hasDoc;
      fitWidthBtn.disabled = !hasDoc;
      resetZoomBtn.disabled = !hasDoc || (!fitMode && scale === 1);
      toggleViewBtn.disabled = !hasDoc;
      updateToggleButtonVisual();
    }

    async function renderPages() {
      if (!pdfDoc) return;

      if (fitMode === 'width') {
        scale = await calculateFitWidthScale();
      } else if (fitMode === 'height') {
        scale = await calculateFitHeightScale();
      }

      pageGrid.innerHTML = '';
      const pagesToRender = isSpread
        ? [currentPage, currentPage + 1].filter((pageNumber) => pageNumber && pageNumber <= pdfDoc.numPages)
        : [currentPage];

      pageGrid.classList.toggle('spread', isSpread && pagesToRender.length > 1);

      for (const pageNumber of pagesToRender) {
        const page = await pdfDoc.getPage(pageNumber);
        const viewport = page.getViewport({ scale });

        const canvas = document.createElement('canvas');
        canvas.className = 'page-canvas';
        canvas.width = viewport.width;
        canvas.height = viewport.height;

        const renderContext = {
          canvasContext: canvas.getContext('2d'),
          viewport,
        };

        await page.render(renderContext).promise;

        const wrapper = document.createElement('div');
        wrapper.className = 'page-wrapper';
        const label = document.createElement('span');
        label.className = 'page-label';
        label.textContent = `Pagina ${pageNumber}`;
        wrapper.appendChild(canvas);
        wrapper.appendChild(label);
        pageGrid.appendChild(wrapper);
      }

      updatePageStatus();
      updateZoomStatus();
      updateButtons();
    }

    function clampZoom(newScale) {
      return Math.min(maxScale, Math.max(minScale, newScale));
    }

    function changeZoom(delta) {
      if (!pdfDoc) return;
      fitMode = null;
      scale = clampZoom(scale + delta);
      renderPages();
    }

    async function setZoomToFitWidth() {
      if (!pdfDoc || !viewerArea) return;
      fitMode = 'width';
      scale = await calculateFitWidthScale();
      renderPages();
    }

    async function setZoomToFitHeight() {
      if (!pdfDoc || !viewerArea) return;
      fitMode = 'height';
      scale = await calculateFitHeightScale();
      renderPages();
    }

    function resetZoom() {
      if (!pdfDoc) return;
      fitMode = null;
      scale = 1;
      renderPages();
    }

    function changePage(direction) {
      if (!pdfDoc) return;
      const step = isSpread ? 2 : 1;
      let target = currentPage + direction * step;
      if (target < 1) target = 1;
      const upperBound = isSpread && pdfDoc.numPages > 1 ? pdfDoc.numPages - 1 : pdfDoc.numPages;
      if (target > upperBound) target = upperBound;
      currentPage = target;
      renderPages();
    }

    function goToPage(targetPage) {
      if (!pdfDoc) return;
      let normalized = Math.min(pdfDoc.numPages, Math.max(1, targetPage));
      if (isSpread && normalized % 2 === 0) {
        normalized = Math.max(1, normalized - 1);
      }
      currentPage = normalized;
      renderPages();
    }

    async function openPdf(arrayBuffer) {
      const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });
      pdfDoc = await loadingTask.promise;
      currentPage = 1;
      scale = 1;
      fitMode = null;
      emptyState?.remove();
      renderPages();
    }

    function toggleView() {
      isSpread = !isSpread;
      if (isSpread && currentPage % 2 === 0) {
        currentPage = Math.max(1, currentPage - 1);
      }
      if (pdfDoc) {
        renderPages();
      }
    }

    function filterItems(items, query) {
      return items
        .map((item) => {
          const matches = !query || item.title.toLowerCase().includes(query);
          const children = item.children ? filterItems(item.children, query) : [];
          if (matches || children.length) {
            return { ...item, children };
          }
          return null;
        })
        .filter(Boolean);
    }

    function renderEntries(items, container) {
      items.forEach((item) => {
        const listItem = document.createElement('li');
        const button = document.createElement('button');
        button.className = 'nav-item';
        button.innerHTML = `<span>${item.title}</span><span class="meta">p. ${item.page}</span>`;
        button.addEventListener('click', () => goToPage(item.page));
        listItem.appendChild(button);
        container.appendChild(listItem);

        if (item.children?.length) {
          const subList = document.createElement('ul');
          subList.className = 'nav-sublist';
          renderEntries(item.children, subList);
          container.appendChild(subList);
        }
      });
    }

    function renderNavigation(query = '') {
      if (!navList) return;
      navList.innerHTML = '';
      const normalizedQuery = query.trim().toLowerCase();

      navigationData.forEach((group) => {
        const filteredItems = filterItems(group.items, normalizedQuery);
        if (!filteredItems.length) return;

        const groupItem = document.createElement('li');
        groupItem.className = 'nav-group';

        const header = document.createElement('div');
        header.className = 'nav-group-header';
        if (group.theme) {
          header.classList.add(`theme-${group.theme}`);
        }
        header.textContent = group.section;
        groupItem.appendChild(header);

        const groupList = document.createElement('ul');
        renderEntries(filteredItems, groupList);
        groupItem.appendChild(groupList);

        navList.appendChild(groupItem);
      });

      if (!navList.children.length) {
        const emptyItem = document.createElement('li');
        emptyItem.textContent = 'Geen resultaten gevonden.';
        emptyItem.style.padding = '12px';
        emptyItem.style.color = 'var(--muted)';
        navList.appendChild(emptyItem);
      }
    }

    fileInput.addEventListener('change', (event) => {
      const file = event.target.files?.[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = (e) => {
        const arrayBuffer = e.target.result;
        openPdf(arrayBuffer);
      };
      reader.readAsArrayBuffer(file);
    });

    prevBtn.addEventListener('click', () => changePage(-1));
    nextBtn.addEventListener('click', () => changePage(1));
    zoomInBtn.addEventListener('click', () => changeZoom(scaleStep));
    zoomOutBtn.addEventListener('click', () => changeZoom(-scaleStep));
    fitHeightBtn.addEventListener('click', setZoomToFitHeight);
    fitWidthBtn.addEventListener('click', setZoomToFitWidth);
    resetZoomBtn.addEventListener('click', resetZoom);
    toggleViewBtn.addEventListener('click', toggleView);

    viewerArea?.addEventListener(
      'wheel',
      (event) => {
        if (!pdfDoc) return;
        if (event.ctrlKey || event.metaKey) {
          event.preventDefault();
          const delta = event.deltaY > 0 ? -scaleStep : scaleStep;
          changeZoom(delta);
        }
      },
      { passive: false }
    );

    navSearch?.addEventListener('input', (event) => {
      renderNavigation(event.target.value);
    });

    window.addEventListener('resize', () => {
      if (!pdfDoc || !fitMode) return;
      renderPages();
    });

    renderNavigation();

    updatePageStatus();
    updateZoomStatus();
    updateButtons();
  </script>
</body>
</html>
